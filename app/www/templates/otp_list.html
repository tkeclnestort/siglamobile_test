<ion-view cache-view="false" view-title="Partes Preventivos">
  <ion-nav-title>
        <div class="logoIcon">Partes Preventivos</div>
  </ion-nav-title>
  <ion-nav-bar class="bar-calm">
    <ion-nav-back-button></ion-nav-back-button>
    <ion-nav-buttons side="left">
      <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
      </button>
    </ion-nav-buttons>
  </ion-nav-bar>
  <ion-content>
    <ion-refresher
      pulling-text="Deslice hacia abajo para actualizar..."
      on-refresh="getList()">
    </ion-refresher>
    <div class="list list-inset">
      <label class="item item-input">
        <i class="icon ion-search placeholder-icon"></i>
        <input type="text" placeholder="Buscar" ng-model="buscar" ng-change="buscarOT(this)">
      </label>
    </div>
    <div ng-show="!otp_list.length" class="row">
      <div class="col">
        <div class="text-center">
          <h4>Sin resultados</h4>
        </div>
      </div>
    </div>
    <ion-list ng-show="otp_list.length" id="otplist">
      <ion-item ng-repeat="otp in otp_list" href="#/app/otp_list/{{otp.id}}">
        <div class="card">
          <div class="item item-divider">
            NÂ°{{otp.numero}} - {{otp.estado.nombre}}
          </div>
          <div class="item item-text-wrap">
            <p>Equipo {{otp.descEquipo}} - {{otp.referenciaEquipo}} - {{otp.ubicacionEquipo}}</p>
            <p>{{otp.nombreObra}}</p>
            <p>{{otp.direccion}}</p>
          </div>
        </div>
      </ion-item>
    </ion-list>
    <ion-infinite-scroll
        icon="ion-loading-c"
        on-infinite="getMore()"
        distance="1%">
    </ion-infinite-scroll>
  </ion-content>
</ion-view>
